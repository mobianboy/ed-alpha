!function(balls){balls.flag={init:function(){this.events()},events:function(){$("body").on("click",function(e){if(e.target.className.indexOf("flagMenu")>-1){var menu=$(this).next();if(menu.hasClass("open")){menu.removeClass("open")}else{menu.addClass("open")}}if(e.target.className.indexOf("flagOption")>-1){self.fire(this)}})},confirmation:function(){},error:function(){},fire:function(obj){var self=this,obj=obj?$(obj):null,id=obj.parentsUntil("[data-post-type]").parent()[0].getAttribute("data-content")||null,toggle=obj.attr("class"),reason=obj.attr("data-content"),description=obj.siblings("input[type='text']").val();if(obj==null||id==null||toggle==null||reason==null)return false;$.ajax({url:"/wp-content/plugins/social/api.php",type:"post",data:{action:"flag",id:id,toggle:toggle,reason:reason,description:description}}).done(function(response){self.confirmation(response);if(obj.hasClass("set")){obj.removeClass("set")}else{obj.addClass("set")}}).fail(function(response){self.error(response)})}}}(window.balls);